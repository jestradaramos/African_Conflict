<html>
<head>
	<meta charset="UTF-8"/>
	<title>Conflicts in Africa</title>
	<script src="http://code.jquery.com/jquery-3.3.1.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script>
	<script src="http://code.jquery.com/jquery-migrate-3.0.1.min.js" integrity="sha256-F0O1TmEa4I8N24nY0bya59eP6svWcshqX1uzwaWC4F4=" crossorigin="anonymous"></script>
	<script src="https://code.jquery.com/ui/1.12.1/jquery-ui.min.js" integrity="sha256-VazP97ZCwtekAsvgPBSUwPFKdrwD3unUfSGVYrahUqU=" crossorigin="anonymous"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/waypoints/2.0.5/waypoints.min.js"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.0/umd/popper.min.js" integrity="sha384-cs/chFZiN24E4KMATLdqdvsezGxaGsi4hLGOzlXwp5UZB1LY//20VyM2taTB4QvJ" crossorigin="anonymous"></script>
	<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.0/css/bootstrap.min.css" integrity="sha384-9gVQ4dYFwwWSjIDZnLEWnxCjeSWFphJiwGPXr1jddIhOegiu1FwO5qRGvFXOdJZ4" crossorigin="anonymous">
	<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.0/js/bootstrap.min.js" integrity="sha384-uefMccjFJAIv6A+rW+L4AHf99KvxDjWSu1z9VI8SKNVmz4sk7buKt/6v9KI65qnm" crossorigin="anonymous"></script>
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/animate.css@3.5.2/animate.min.css">
	<link rel='stylesheet' type='text/css' href='africa-style.css'>
	<link href="https://fonts.googleapis.com/css?family=Oswald:600" rel="stylesheet">
	<script src='d3v4/d3.min.js'></script>
	<script src="https://d3js.org/d3.v3.min.js"></script>
	<script src='js/africa.js'></script>
	<script src='d3v4/d3.v3.min.js'></script>
</head>

<style>
.label { font-size: 10px; }
.line { fill: none; stroke-width: 1.4px; stroke: #74736c;}
.area { fill: #cec6b9; }
.background {fill: none;}
.chart {
	float: left;
	padding-right: 5px;
	padding-bottom: 5px;
	padding-top: 0;
	padding-left: 0;
}
.yaxis path,
.yaxis line {
	fill:none;
	stroke: #fff;
	opacity: 0.5;
	shape-rendering: crispEdges;
}
svg { border: solid 0.5px #333; margin: 5px;}

#learn-more.semi-transparent-button, #see-full-list.semi-transparent-button, .semi-transparent-button{
	display: block;
	box-sizing: border-box;
	margin: 25px auto;
	padding: 8px;
	width: 12em;
	background-color: rgba(200, 200, 200, 0.2);
	border-radius: 2px;
	border-color: rgba(200, 200, 200, 0.3);
	color: #fff;
	text-align: center;
	text-decoration: none;
	letter-spacing: 1px;
	transition: all 0.3s ease-out;
	border: 1px solid rgba(200, 200, 200, 0.3);
	text-decoration-color: white;
}

#learn-more.semi-transparent-button:hover, #see-full-list.semi-transparent-button:hover, .semi-transparent-button:hover{
	border: 1px solid white;
}

#play-button {
	bottom: 10px;
	margin-left: auto;
	margin-right: auto;
	position: absolute;
	left: 44%;
	margin: 25px auto;
	padding: 8px;
	width: 12em;
	border-radius: 2px;
	border-color: rgba(200, 200, 200, 0.3);
	text-align: center;
	cursor: pointer;
}

#linked {
	display: block;
	margin-left: 200px;
	margin-right: 200px;
	float: 	left;
}

object{
	/* background-color: #daad86; */
	margin-top: 10px;
	height: 70vh;
	width: 100%;
	height: 100%;
}

.Conflict {
	width: 100%;
	height: 180vh;

}

.text-center {
	text-align: center;
	margin-left: 150px;
	margin-right: 150px;
}

.center{
	position: relative;
	left: 50%;
	-webkit-transform: translateX(-50%);
	-ms-transform: translateX(-50%);
	transform: translateX(-50%);
}

.fatalities {
background-color: #daad86;
}
.word{
background-color: #659dbd;
}
.force{
	background-color: #659dbd;
}

.top{
  text-align: center;
}

</style>

<body>

	<div class="hero-image">
		<div class="hero-text">
			<h1 class='text-center' id='hero-title'>African Conflicts</h1>
			<p class='text-center'id='hero-sub'>For the past 20 years</p>
			<div id="main-menu">
				<a href="#start"id = "learn-more" class="cd-btn semi-transparent-button" role="button">Learn More</a>
			</div>
		</div>
	</div>

	<!-- When user clicks the learn more button, webpage moves to this start div -->
	<div id="start"></div>

	<div class="row map-row">
		<div class="col">
			<br>
			<br>
			<h2 class="text-center">Conflicts Over Time</h2>
			<br>
			<p class="text-center">This is a map which pins each of the reported location of
				conflicts. You can click on a pin to see the death toll, you can
				zoom in and out, and you have different views of the map. </p>
				<p class="text-center">Things that are recognizable here is that as you search through
					higher death tolls, all the pins tend to be around the mid region on
					Africa. From this we can tell that most of events that happen
					towards the middle of the continent are much more violent than the
					edges.</p>
					<br>
					<br>
				</div>
				<br>
				<object class="size" type="text/html" data="google/index2.html"></object>
			</div>

			<br>
			<br>
			<br>
			<br>
			<br>
			<br>
			<br>
			<br>
			<br>
			<br>
			<br>
			<br>


			<div class="row link-row">
			<div class="col-md-12">
				<h2 class="text-center">Conflicts by Type Over Time</h2>
				<p class="text-center">In this small linked multiple, each line chart represents the
					number of conflict per year for that conflict type. You can
					hover over one of them and it will have a tooltip appear at each
					graph showing the count. This is to make it easier to compare
					all of the event types</p>

					<p class="text-center"> Some of the things you can notice is that riots/protests,
						violence against civilians, and battles with no change of
						territories are on the rise in most recent years. </p>
					</div>

					<div class= "center">
						<div id='linked'></div>
					</div>
				</div>
			</br>
		</br>


<!-- <div id="force">
	<div class="col-md-12">

		<div class="col top">
	    <h2 class="text-center">Conflict Type Force Directed Graph</h2>
	    <p>
	      This graph represents all strengths of different conflicts between the
	      multiple organization types. Each node represents an organization type in
	      Africa while each link represents a specific type of conflict between the different nodes.
	      <br>
	      The weight of the link represents the larger number of instances between the two nodes
	      showcasing huge conflicts between those two types of organizations found in Africa.
	    </p>
	    </div>

		<div class="legend1">
		<div class="legend1"> <p class="typeName"><span class="key-dot type1"></span>Government or mutinous force</p> </div>
		<div class="legend1"> <p class="typeName"><span class="key-dot type2"></span>Rebel force</p> </div>
		<div class="legend1"> <p class="typeName"><span class="key-dot type3"></span>Political militia</p> </div>
		<div class="legend1"> <p class="typeName"><span class="key-dot type4"></span>Ethnic militia</p> </div>
		<div class="legend1"> <p class="typeName"><span class="key-dot type5"></span>Rioters</p> </div>
		<div class="legend1"> <p class="typeName"><span class="key-dot type6"></span>Protesters</p> </div>
		<div class="legend1"> <p class="typeName"><span class="key-dot type7"></span>Civilians</p> </div>
		<div class="legend1"> <p class="typeName"><span class="key-dot type8"></span>Outside/external force</p> </div>
	</div>


		<! <object class="force"type="text/html" data="Goutham/forceDir.html"></object> -->
	<!-- </div>
</div>  -->


<div id="Conflict">
	<object class="Conflict" type="text/html" data="wordclouds/index.html"></object>
</div>
<div id="fatalities">
	<object class="fatalities" type="text/html" data="Zach/stacked_conflicts/index.html"></object>
</div>
<div id="word">
	<object class="word" type="text/html" data="Zach/stacked_fatalities/index.html"></object>
</div>


<div style="background-color:#daad86">
	<!-- <div class="col top">
	<br>
	<h2 class="text-center">Force Direct Diagram</h2>

	<div class="legend1">
	<div class="legend1"> <p class="typeName"><span class="key-dot type1"></span>Government or mutinous force</p> </div>
	<div class="legend1"> <p class="typeName"><span class="key-dot type2"></span>Rebel force</p> </div>
	<div class="legend1"> <p class="typeName"><span class="key-dot type3"></span>Political militia</p> </div>
	<div class="legend1"> <p class="typeName"><span class="key-dot type4"></span>Ethnic militia</p> </div>
	<div class="legend1"> <p class="typeName"><span class="key-dot type5"></span>Rioters</p> </div>
	<div class="legend1"> <p class="typeName"><span class="key-dot type6"></span>Protesters</p> </div>
	<div class="legend1"> <p class="typeName"><span class="key-dot type7"></span>Civilians</p> </div>
	<div class="legend1"> <p class="typeName"><span class="key-dot type8"></span>Outside/external force</p> </div>
</div> -->

<div id='linked'></div>

<div id="force">
	<div class="col-md-12">

		<div class="col top">
	    <h2 class="text-center">Conflict Type Force Directed Graph</h2>
	    <p>
	      This graph represents all strengths of different conflicts between the
	      multiple organization types. Each node represents an organization type in
	      Africa while each link represents a specific type of conflict between the different nodes.
	      <br>
	      The weight of the link represents the larger number of instances between the two nodes
	      showcasing huge conflicts between those two types of organizations found in Africa.
	    </p>
	    </div>

		<div class="legend1">
		<div class="legend1"> <p class="typeName"><span class="key-dot type1"></span>Government or mutinous force</p> </div>
		<div class="legend1"> <p class="typeName"><span class="key-dot type2"></span>Rebel force</p> </div>
		<div class="legend1"> <p class="typeName"><span class="key-dot type3"></span>Political militia</p> </div>
		<div class="legend1"> <p class="typeName"><span class="key-dot type4"></span>Ethnic militia</p> </div>
		<div class="legend1"> <p class="typeName"><span class="key-dot type5"></span>Rioters</p> </div>
		<div class="legend1"> <p class="typeName"><span class="key-dot type6"></span>Protesters</p> </div>
		<div class="legend1"> <p class="typeName"><span class="key-dot type7"></span>Civilians</p> </div>
		<div class="legend1"> <p class="typeName"><span class="key-dot type8"></span>Outside/external force</p> </div>
	</div>


		<!-- <object class="force"type="text/html" data="Goutham/forceDir.html"></object> -->
	</div>
</div>



<script src='js/map_video.js'></script>
<script src='js/linked.js'></script>
<script src='js/style.js'></script>


<script type='text/javascript'>
d3.csv('/csv/multiline_data.csv', function(error, data) {
	data.forEach(function (d) {
		d.year = +d.year;
		d.variableA = +d.variableA;
		d.variableB = +d.variableB;
		d.variableC = +d.variableC;
		d.variableD = +d.variableD;
		d.variableE = +d.variableE;
	});
	var chart = makeLineChart(data, 'year', {
		'Civilians (Burundi)': {column: 'variableA'},
		'Civilians (Democratic Republic of Congo)': {column: 'variableB'},
		'Military Forces of Democratic Republic of Congo (2001-)': {column: 'variableC'},
		'Protesters (Egypt)': {column: 'variableD'},
		'UNITA: National Union for the Total Independence of Angola': {column: 'variableE'}
	}, {xAxis: 'Years', yAxis: 'Amount'});
	chart.bind("#chart-line1");
	chart.render();
});

</script>

<script src='js/multiline.js'></script>


<script type="text/javascript">
$(function() {
	$('#main-menu a').bind('click',function(event){
		var $anchor = $(this);
		$('html, body').stop().animate({
			scrollTop: $($anchor.attr('href')).offset().top
		}, 1500,'easeInOutExpo');
		event.preventDefault();
	});
});
</script>

<script type='text/javascript' src="http://labratrevenge.com/d3-tip/javascripts/d3.tip.v0.6.3.js"> </script>
<script type="application/json" id="mis">
{
  "nodes": [
    {
      "name": "",
      "group": 0
    },
    {
      "name": "Government or mutinous force",
      "group": 1
    },
    {
      "name": "Rebel force",
      "group": 2
    }
    ,{
      "name": "Political militia",
      "group": 3
    }
    ,{
      "name": "Ethnic militia",
      "group": 4
    }
    ,{
      "name": "Rioters",
      "group": 5
    }
    ,{
      "name": "Protesters",
      "group": 6
    }
    ,{
      "name": "Civilians",
      "group": 7
    }
    ,{
      "name": "Outside/external force",
      "group": 8
    }],
    "links":[

      {
        "source": 1,
        "target": 1,
        "value": 1,
        "inter": 11,
        "freq": 1706,
        "norm": 0.061001789,
        "sourceNm": "Government or mutinous force",
        "targetNm": "Government or mutinous force",
        "type": "MILITARY VERSUS MILITARY"
      },
      {
        "source": 1,
        "target": 2,
        "value": 1,
        "inter": 12,
        "freq": 15033,
        "norm": 0.537817531,
        "sourceNm": "Government or mutinous force",
        "targetNm": "Rebel force",
        "type": "MILITARY VERSUS REBELS"
      },
      {
        "source": 1,
        "target": 1,
        "value": 1,
        "inter": 13,
        "freq": 1,
        "norm": 0,
        "sourceNm": "Government or mutinous force",
        "targetNm": "Government or mutinous force",
        "type": "MILITARY VERSUS POLITICAL MILITIA"
      },
      {
        "source": 1,
        "target": 3,
        "value": 1,
        "inter": 13,
        "freq": 9027,
        "norm": 0.32293381,
        "sourceNm": "Government or mutinous force",
        "targetNm": "Political militia",
        "type": "MILITARY VERSUS POLITICAL MILITIA"
      },
      {
        "source": 1,
        "target": 4,
        "value": 1,
        "inter": 14,
        "freq": 927,
        "norm": 0.03313059,
        "sourceNm": "Government or mutinous force",
        "targetNm": "Ethnic militia",
        "type": "MILITARY VERSUS COMMUNAL MILITIA"
      },
      {
        "source": 1,
        "target": 5,
        "value": 1,
        "inter": 15,
        "freq": 993,
        "norm": 0.03549195,
        "sourceNm": "Government or mutinous force",
        "targetNm": "Rioters",
        "type": "MILITARY VERSUS RIOTERS"
      },
      {
        "source": 1,
        "target": 6,
        "value": 1,
        "inter": 16,
        "freq": 1404,
        "norm": 0.05019678,
        "sourceNm": "Government or mutinous force",
        "targetNm": "Protesters",
        "type": "MILITARY VERSUS PROTESTERS"
      },
      {
        "source": 1,
        "target": 7,
        "value": 1,
        "inter": 17,
        "freq": 10274,
        "norm": 0.367549195,
        "sourceNm": "Government or mutinous force",
        "targetNm": "Civilians",
        "type": "MILITARY VERSUS CIVILIANS"
      },
      {
        "source": 1,
        "target": 8,
        "value": 1,
        "inter": 18,
        "freq": 370,
        "norm": 0.013202147,
        "sourceNm": "Government or mutinous force",
        "targetNm": "Outside/external force",
        "type": "MILITARY VERSUS OTHER"
      },
      {
        "source": 1,
        "target": 7,
        "value": 1,
        "inter": 37,
        "freq": 1,
        "norm": 0,
        "sourceNm": "Government or mutinous force",
        "targetNm": "Civilians",
        "type": "POLITICAL MILITIA VERSUS CIVILIANS"
      },
      {
        "source": 2,
        "target": 1,
        "value": 1,
        "inter": 12,
        "freq": 6266,
        "norm": 0.224150268,
        "sourceNm": "Rebel force",
        "targetNm": "Government or mutinous force",
        "type": "MILITARY VERSUS REBELS"
      },
      {
        "source": 2,
        "target": 2,
        "value": 1,
        "inter": 22,
        "freq": 545,
        "norm": 0.019463327,
        "sourceNm": "Rebel force",
        "targetNm": "Rebel force",
        "type": "REBELS VERSUS REBELS"
      },
      {
        "source": 2,
        "target": 3,
        "value": 1,
        "inter": 23,
        "freq": 1062,
        "norm": 0.037960644,
        "sourceNm": "Rebel force",
        "targetNm": "Political militia",
        "type": "REBELS VERSUS POLITICAL MILIITA"
      },
      {
        "source": 2,
        "target": 4,
        "value": 1,
        "inter": 24,
        "freq": 261,
        "norm": 0.009302326,
        "sourceNm": "Rebel force",
        "targetNm": "Ethnic militia",
        "type": "REBELS VERSUS COMMUNAL MILITIA"
      },
      {
        "source": 2,
        "target": 5,
        "value": 1,
        "inter": 25,
        "freq": 3,
        "norm": 0.0000716,
        "sourceNm": "Rebel force",
        "targetNm": "Rioters",
        "type": "REBELS VERSUS RIOTERS"
      },
      {
        "source": 2,
        "target": 6,
        "value": 1,
        "inter": 26,
        "freq": 9,
        "norm": 0.000286225,
        "sourceNm": "Rebel force",
        "targetNm": "Protesters",
        "type": "REBELS VERSUS PROTESTERS"
      },
      {
        "source": 2,
        "target": 7,
        "value": 1,
        "inter": 27,
        "freq": 9899,
        "norm": 0.354132379,
        "sourceNm": "Rebel force",
        "targetNm": "Civilians",
        "type": "REBELS VERSUS CIVILIANS"
      },
      {
        "source": 2,
        "target": 8,
        "value": 1,
        "inter": 28,
        "freq": 890,
        "norm": 0.031806798,
        "sourceNm": "Rebel force",
        "targetNm": "Outside/external force",
        "type": "REBELS VERSUS OTHERS"
      },
      {
        "source": 3,
        "target": 1,
        "value": 1,
        "inter": 13,
        "freq": 5693,
        "norm": 0.203649374,
        "sourceNm": "Political militia",
        "targetNm": "Government or mutinous force",
        "type": "MILITARY VERSUS POLITICAL MILITIA"
      },
      {
        "source": 3,
        "target": 2,
        "value": 1,
        "inter": 22,
        "freq": 1,
        "norm": 0,
        "sourceNm": "Political militia",
        "targetNm": "Rebel force",
        "type": "REBELS VERSUS REBELS"
      },
      {
        "source": 3,
        "target": 2,
        "value": 1,
        "inter": 23,
        "freq": 1358,
        "norm": 0.048550984,
        "sourceNm": "Political militia",
        "targetNm": "Rebel force",
        "type": "REBELS VERSUS POLITICAL MILIITA"
      },
      {
        "source": 3,
        "target": 3,
        "value": 1,
        "inter": 33,
        "freq": 2246,
        "norm": 0.080322004,
        "sourceNm": "Political militia",
        "targetNm": "Political militia",
        "type": "POLITICAL MILITIA VERSUS POLITICAL MILITIA"
      },
      {
        "source": 3,
        "target": 4,
        "value": 1,
        "inter": 34,
        "freq": 422,
        "norm": 0.015062612,
        "sourceNm": "Political militia",
        "targetNm": "Ethnic militia",
        "type": "POLITICAL MILITIA VERSUS COMMUNAL MILITIA"
      },
      {
        "source": 3,
        "target": 5,
        "value": 1,
        "inter": 35,
        "freq": 30,
        "norm": 0.001037567,
        "sourceNm": "Political militia",
        "targetNm": "Rioters",
        "type": "POLITICAL MILITIA VERSUS RIOTERS"
      },
      {
        "source": 3,
        "target": 6,
        "value": 1,
        "inter": 36,
        "freq": 70,
        "norm": 0.002468694,
        "sourceNm": "Political militia",
        "targetNm": "Protesters",
        "type": "POLITICAL MILITIA VERSUS PROTESTERS"
      },
      {
        "source": 3,
        "target": 7,
        "value": 1,
        "inter": 37,
        "freq": 23433,
        "norm": 0.838354204,
        "sourceNm": "Political militia",
        "targetNm": "Civilians",
        "type": "POLITICAL MILITIA VERSUS CIVILIANS"
      },
      {
        "source": 3,
        "target": 8,
        "value": 1,
        "inter": 38,
        "freq": 975,
        "norm": 0.034847943,
        "sourceNm": "Political militia",
        "targetNm": "Outside/external force",
        "type": "POLITICAL MILITIA VERSUS OTHERS"
      },
      {
        "source": 3,
        "target": 7,
        "value": 1,
        "inter": 47,
        "freq": 1,
        "norm": 0,
        "sourceNm": "Political militia",
        "targetNm": "Civilians",
        "type": "COMMUNAL MILITIA VERSUS CIVILIANS"
      },
      {
        "source": 4,
        "target": 1,
        "value": 1,
        "inter": 14,
        "freq": 604,
        "norm": 0.02157424,
        "sourceNm": "Ethnic militia",
        "targetNm": "Government or mutinous force",
        "type": "MILITARY VERSUS COMMUNAL MILITIA"
      },
      {
        "source": 4,
        "target": 2,
        "value": 1,
        "inter": 24,
        "freq": 297,
        "norm": 0.01059034,
        "sourceNm": "Ethnic militia",
        "targetNm": "Rebel force",
        "type": "REBELS VERSUS COMMUNAL MILITIA"
      },
      {
        "source": 4,
        "target": 3,
        "value": 1,
        "inter": 34,
        "freq": 363,
        "norm": 0.012951699,
        "sourceNm": "Ethnic militia",
        "targetNm": "Political militia",
        "type": "POLITICAL MILITIA VERSUS COMMUNAL MILITIA"
      },
      {
        "source": 4,
        "target": 4,
        "value": 1,
        "inter": 44,
        "freq": 4331,
        "norm": 0.154919499,
        "sourceNm": "Ethnic militia",
        "targetNm": "Ethnic militia",
        "type": "COMMUNAL MILITIA VERSUS COMMUNAL MILITIA"
      },
      {
        "source": 4,
        "target": 5,
        "value": 1,
        "inter": 45,
        "freq": 7,
        "norm": 0.000214669,
        "sourceNm": "Ethnic militia",
        "targetNm": "Rioters",
        "type": "COMMUNAL MILITIA VERSUS RIOTERS"
      },
      {
        "source": 4,
        "target": 6,
        "value": 1,
        "inter": 46,
        "freq": 4,
        "norm": 0.000107335,
        "sourceNm": "Ethnic militia",
        "targetNm": "Protesters",
        "type": "COMMUNAL MILITIA VERSUS PROTESTERS"
      },
      {
        "source": 4,
        "target": 7,
        "value": 1,
        "inter": 47,
        "freq": 5374,
        "norm": 0.192236136,
        "sourceNm": "Ethnic militia",
        "targetNm": "Civilians",
        "type": "COMMUNAL MILITIA VERSUS CIVILIANS"
      },
      {
        "source": 4,
        "target": 8,
        "value": 1,
        "inter": 48,
        "freq": 60,
        "norm": 0.002110912,
        "sourceNm": "Ethnic militia",
        "targetNm": "Outside/external force",
        "type": "COMMUNAL MILITIA VERSUS OTHER"
      },
      {
        "source": 5,
        "target": 1,
        "value": 1,
        "inter": 15,
        "freq": 6286,
        "norm": 0.224865832,
        "sourceNm": "Rioters",
        "targetNm": "Government or mutinous force",
        "type": "MILITARY VERSUS RIOTERS"
      },
      {
        "source": 5,
        "target": 2,
        "value": 1,
        "inter": 25,
        "freq": 17,
        "norm": 0.000572451,
        "sourceNm": "Rioters",
        "targetNm": "Rebel force",
        "type": "REBELS VERSUS RIOTERS"
      },
      {
        "source": 5,
        "target": 3,
        "value": 1,
        "inter": 35,
        "freq": 118,
        "norm": 0.004186047,
        "sourceNm": "Rioters",
        "targetNm": "Political militia",
        "type": "POLITICAL MILITIA VERSUS RIOTERS"
      },
      {
        "source": 5,
        "target": 4,
        "value": 1,
        "inter": 45,
        "freq": 20,
        "norm": 0.000679785,
        "sourceNm": "Rioters",
        "targetNm": "Ethnic militia",
        "type": "COMMUNAL MILITIA VERSUS RIOTERS"
      },
      {
        "source": 5,
        "target": 5,
        "value": 1,
        "inter": 55,
        "freq": 1407,
        "norm": 0.050304114,
        "sourceNm": "Rioters",
        "targetNm": "Rioters",
        "type": "RIOTERS VERSUS RIOTERS"
      },
      {
        "source": 5,
        "target": 6,
        "value": 1,
        "inter": 56,
        "freq": 39,
        "norm": 0.001359571,
        "sourceNm": "Rioters",
        "targetNm": "Protesters",
        "type": "RIOTERS VERSUS PROTESTERS"
      },
      {
        "source": 5,
        "target": 7,
        "value": 1,
        "inter": 57,
        "freq": 889,
        "norm": 0.03177102,
        "sourceNm": "Rioters",
        "targetNm": "Civilians",
        "type": "RIOTERS VERSUS CIVILIANS"
      },
      {
        "source": 5,
        "target": 8,
        "value": 1,
        "inter": 58,
        "freq": 240,
        "norm": 0.008550984,
        "sourceNm": "Rioters",
        "targetNm": "Outside/external force",
        "type": "RIOTERS VERSUS OTHERS"
      },
      {
        "source": 6,
        "target": 1,
        "value": 1,
        "inter": 16,
        "freq": 3370,
        "norm": 0.120536673,
        "sourceNm": "Protesters",
        "targetNm": "Government or mutinous force",
        "type": "MILITARY VERSUS PROTESTERS"
      },
      {
        "source": 6,
        "target": 2,
        "value": 1,
        "inter": 26,
        "freq": 15,
        "norm": 0.000500894,
        "sourceNm": "Protesters",
        "targetNm": "Rebel force",
        "type": "REBELS VERSUS PROTESTERS"
      },
      {
        "source": 6,
        "target": 3,
        "value": 1,
        "inter": 36,
        "freq": 72,
        "norm": 0.00254025,
        "sourceNm": "Protesters",
        "targetNm": "Political militia",
        "type": "POLITICAL MILITIA VERSUS PROTESTERS"
      },
      {
        "source": 6,
        "target": 4,
        "value": 1,
        "inter": 46,
        "freq": 7,
        "norm": 0.000214669,
        "sourceNm": "Protesters",
        "targetNm": "Ethnic militia",
        "type": "COMMUNAL MILITIA VERSUS PROTESTERS"
      },
      {
        "source": 6,
        "target": 5,
        "value": 1,
        "inter": 56,
        "freq": 36,
        "norm": 0.001252236,
        "sourceNm": "Protesters",
        "targetNm": "Rioters",
        "type": "RIOTERS VERSUS PROTESTERS"
      },
      {
        "source": 6,
        "target": 6,
        "value": 1,
        "inter": 66,
        "freq": 89,
        "norm": 0.003148479,
        "sourceNm": "Protesters",
        "targetNm": "Protesters",
        "type": "PROTESTERS VERSUS PROTESTERS"
      },
      {
        "source": 6,
        "target": 8,
        "value": 1,
        "inter": 68,
        "freq": 69,
        "norm": 0.002432916,
        "sourceNm": "Protesters",
        "targetNm": "Outside/external force",
        "type": "PROTESTERS VERSUS OTHER"
      },
      {
        "source": 7,
        "target": 1,
        "value": 1,
        "inter": 17,
        "freq": 3,
        "norm": 0.0000716,
        "sourceNm": "Civilians",
        "targetNm": "Government or mutinous force",
        "type": "MILITARY VERSUS CIVILIANS"
      },
      {
        "source": 7,
        "target": 2,
        "value": 1,
        "inter": 27,
        "freq": 1,
        "norm": 0,
        "sourceNm": "Civilians",
        "targetNm": "Rebel force",
        "type": "REBELS VERSUS CIVILIANS"
      },
      {
        "source": 7,
        "target": 3,
        "value": 1,
        "inter": 37,
        "freq": 2,
        "norm": 0.0000358,
        "sourceNm": "Civilians",
        "targetNm": "Political militia",
        "type": "POLITICAL MILITIA VERSUS CIVILIANS"
      },
      {
        "source": 7,
        "target": 7,
        "value": 1,
        "inter": 77,
        "freq": 11,
        "norm": 0.000357782,
        "sourceNm": "Civilians",
        "targetNm": "Civilians",
        "type": ""
      },
      {
        "source": 8,
        "target": 1,
        "value": 1,
        "inter": 18,
        "freq": 659,
        "norm": 0.023542039,
        "sourceNm": "Outside/external force",
        "targetNm": "Government or mutinous force",
        "type": "MILITARY VERSUS OTHER"
      },
      {
        "source": 8,
        "target": 2,
        "value": 1,
        "inter": 28,
        "freq": 3147,
        "norm": 0.11255814,
        "sourceNm": "Outside/external force",
        "targetNm": "Rebel force",
        "type": "REBELS VERSUS OTHERS"
      },
      {
        "source": 8,
        "target": 3,
        "value": 1,
        "inter": 38,
        "freq": 765,
        "norm": 0.027334526,
        "sourceNm": "Outside/external force",
        "targetNm": "Political militia",
        "type": "POLITICAL MILITIA VERSUS OTHERS"
      },
      {
        "source": 8,
        "target": 4,
        "value": 1,
        "inter": 48,
        "freq": 67,
        "norm": 0.00236136,
        "sourceNm": "Outside/external force",
        "targetNm": "Ethnic militia",
        "type": "COMMUNAL MILITIA VERSUS OTHER"
      },
      {
        "source": 8,
        "target": 5,
        "value": 1,
        "inter": 58,
        "freq": 17,
        "norm": 0.000572451,
        "sourceNm": "Outside/external force",
        "targetNm": "Rioters",
        "type": "RIOTERS VERSUS OTHERS"
      },
      {
        "source": 8,
        "target": 6,
        "value": 1,
        "inter": 68,
        "freq": 13,
        "norm": 0.000429338,
        "sourceNm": "Outside/external force",
        "targetNm": "Protesters",
        "type": "PROTESTERS VERSUS OTHER"
      },
      {
        "source": 8,
        "target": 7,
        "value": 1,
        "inter": 78,
        "freq": 883,
        "norm": 0.031556351,
        "sourceNm": "Outside/external force",
        "targetNm": "Civilians",
        "type": "OTHER ACTOR VERSUS CIVILIANS"
      },
      {
        "source": 8,
        "target": 8,
        "value": 1,
        "inter": 88,
        "freq": 73,
        "norm": 0.002576029,
        "sourceNm": "Outside/external force",
        "targetNm": "Outside/external force",
        "type": ""
      }

    ]
  }
</script>

<script>
var width = 800,
height = 500;

//Set up the colour scale
var color = d3.scale.category20();

//Set up the force layout
var force = d3.layout.force()
.charge(-120)
.linkDistance(200)
.size([width, height]);

//Append a SVG to the body of the html page. Assign this SVG as an object to svg
var svg = d3.select("body").append("svg")
.attr("width", width)
.attr("height", height);

//Set up tooltip
var tip = d3.tip()
.attr('class', 'd3-tip')
.offset([-10, 0])
.html(function (d) {
  return  d.name + "";
})
svg.call(tip);

var tip2 = d3.tip()
.attr('class', 'd3-tip2')
.offset([-10, 0])
.html(function (d) {
  return "Number of Instances: "+ d.freq + "<br> Interaction: "+ d.type + "";
})
svg.call(tip2);

//Read the data from the mis element
var mis = document.getElementById('mis').innerHTML;
graph = JSON.parse(mis);
graphRec=JSON.parse(JSON.stringify(graph)); //Add this line

//Creates the graph data structure out of the json data
force.nodes(graph.nodes)
.links(graph.links)
.start();

//Create all the line svgs but without locations yet
var link = svg.selectAll(".link")
.data(graph.links)
.enter().append("line")
.on('mouseover', tip2.show)
.on('mouseout', tip2.hide)
.attr("class", "link")
// .style("stroke", function(d) { return color(d.norm); })
// .style("marker-end",  "url(#suit)") // Modified line
.style("stroke-width", function (d) {
  return Math.sqrt(d.norm*20);
});

//Do the same with the circles for the nodes - no
var node = svg.selectAll(".node")
.data(graph.nodes)
.enter().append("circle")
.attr("class", "node")
.attr("r", 15)
.style("fill", function (d) {
  return color(d.group);
})
.style("visibility", function (d) {
  return d.group === 0 ? "hidden" : "visible";
})
.call(force.drag)
.on('dblclick', connectedNodes)
.on('mouseover', tip.show)
.on('mouseout', tip.hide);


//Now we are giving the SVGs co-ordinates - the force layout is generating the co-ordinates which this code is using to update the attributes of the SVG elements
force.on("tick", function () {
  link.attr("x1", function (d) {
    return d.source.x;
  })
  .attr("y1", function (d) {
    return d.source.y;
  })
  .attr("x2", function (d) {
    return d.target.x;
  })
  .attr("y2", function (d) {
    return d.target.y;
  });

  node.attr("cx", function (d) {
    return d.x;
  })
  .attr("cy", function (d) {
    return d.y;
  });
  node.each(collide(0.5)); //Added
});

svg.append("defs").selectAll("marker")
.data(["suit", "licensing", "resolved"])
.enter().append("marker")
.attr("id", function(d) { return d; })
.attr("viewBox", "0 -5 10 10")
.attr("refX", 25)
.attr("refY", 0)
.attr("markerWidth", 6)
.attr("markerHeight", 6)
.attr("orient", "auto")
.append("path")
.attr("d", "M0,-5L10,0L0,5 L10,0 L0, -5")
.style("stroke", "#4679BD")
.style("opacity", "0.6");

//adjust threshold
function threshold(thresh) {
  graph.links.splice(0, graph.links.length);
  for (var i = 0; i < graphRec.links.length; i++) {
    if (graphRec.links[i].value > thresh) {graph.links.push(graphRec.links[i]);}
  }
  restart();
}
//Restart the visualisation after any node and link changes
function restart() {
  link = link.data(graph.links);
  link.exit().remove();
  link.enter().insert("line", ".node").attr("class", "link");
  node = node.data(graph.nodes);
  node.enter().insert("circle", ".cursor").attr("class", "node").attr("r", 5).call(force.drag);
  force.start();
}


var padding = 10, // separation between circles
radius=15;
function collide(alpha) {
  var quadtree = d3.geom.quadtree(graph.nodes);
  return function(d) {
    var rb = 2*radius + padding,
    nx1 = d.x - rb,
    nx2 = d.x + rb,
    ny1 = d.y - rb,
    ny2 = d.y + rb;
    quadtree.visit(function(quad, x1, y1, x2, y2) {
      if (quad.point && (quad.point !== d)) {
        var x = d.x - quad.point.x,
        y = d.y - quad.point.y,
        l = Math.sqrt(x * x + y * y);
        if (l < rb) {
          l = (l - rb) / l * alpha;
          d.x -= x *= l;
          d.y -= y *= l;
          quad.point.x += x;
          quad.point.y += y;
        }
      }
      return x1 > nx2 || x2 < nx1 || y1 > ny2 || y2 < ny1;
    });
  };
}

//Toggle stores whether the highlighting is on
var toggle = 0;
//Create an array logging what is connected to what
var linkedByIndex = {};
for (i = 0; i < graph.nodes.length; i++) {
  linkedByIndex[i + "," + i] = 1;
};
graph.links.forEach(function (d) {
  linkedByIndex[d.source.index + "," + d.target.index] = 1;
});
//This function looks up whether a pair are neighbours
function neighboring(a, b) {
  return linkedByIndex[a.index + "," + b.index];
}
function connectedNodes() {
  if (toggle == 0) {
    d = d3.select(this).node().__data__;
    node.style("opacity", function (o) {
      return neighboring(d, o) | neighboring(o, d) ? 1 : 0.1;
    });
    link.style("opacity", function (o) {
      return d.index==o.source.index | d.index==o.target.index ? 1 : 0.1;
    });
    toggle = 1;
  } else {
    //Put them back to opacity=1
    node.style("opacity", 1);
    link.style("opacity", 1);
    toggle = 0;
  }
}

</script>


</body>

</html>
